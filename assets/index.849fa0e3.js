var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,o=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&l(e,a,t[a]);if(r)for(var a of r(t))n.call(t,a)&&l(e,a,t[a]);return e},u=(e,r)=>t(e,a(r));import{a as i,s as d,e as c,f as p,b as v,r as f,c as y,o as m,d as g,g as h,n as b,t as $,u as M,F as w,h as O,i as S,j as D,p as j,k,l as L,w as x,m as A,q as P,v as T,x as F}from"./vendor.eb19e540.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const _=(e,t)=>{const a=d(e),r=c(e),s=new Date(a).getDay(),n=new Date(r).getDate(),l=[];for(let o=0;o<n;o++){const e=e=>p(v(a,o),e);l.push({currentMonth:0,day:(s+o)%7,date:e(t),month:e("M"),days:e("d"),valueOf:v(a,o).valueOf()})}return l},C=(e,t,a)=>{if(0===a)return[];return[..._(i(e,-1),t)].map((e=>u(o({},e),{currentMonth:-1}))).slice(-a)},I=(e,t,a)=>{if(0===a)return[];let r=[..._(i(e,1),t)].map((e=>u(o({},e),{currentMonth:1})));return r.splice(a),r},N=(e,t)=>-1===t?0===e?6:e-1:0===e?e:7-e;const J={props:{title:{type:String,default:"Calendar"},dayTexts:{type:Array,default:()=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},monthTexts:{type:Array,default:()=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},dataList:{type:Array,default:()=>[]},format:{type:String,default:"yyyy-MM-dd"},start:{type:String,default:""}},emits:["changeMonth"],setup(e,{expose:t}){const a=e,r=D(),s=new Date,n=f(+s.getMonth()),l=f(+s.getFullYear()),o="tosn-calendar",u=y((()=>`${a.monthTexts[n.value]} ${l.value}`)),i=y((()=>`${l.value}-${(n.value+1).toString().padStart(2,0)}`)),d=y((()=>i.value===a.start)),c=y((()=>((e=new Date,t)=>{const a=_(e,t),r=a[0].day,s=a[a.length-1].day;return[...C(e,t,N(r,-1)),...a,...I(e,t,N(s,1))]})(new Date(`${l.value}/${n.value+1}/1`),a.format))),v=e=>{if(1===e)n.value<11?n.value+=1:(n.value=1,l.value+=1);else{if(d.value)return!1;0===n.value?(n.value=11,l.value-=1):n.value-=1}r.emit("changeMonth",i.value)},j=(e,t)=>c.value[7*(e-1)+(t-1)],k=e=>{if(0!==e.currentMonth)return"";const t=["color-grey"],r=p(new Date,a.format);return e.date<=r&&t.push("color-purple"),a.dataList.some((t=>t.date===e.date))&&t.push("color-green"),e.date===r&&t.push("color-today"),t.join(" ")};return t({resetDate:()=>{n.value=+s.getMonth(),l.value=+s.getFullYear()}}),(t,a)=>(m(),g("div",{class:b(`${o}-box`)},[h("div",{class:b(`${o}-header`)},[h("div",{class:b(`${o}-title`)},$(e.title),3),h("div",{class:b(`${o}-editor`)},[h("div",null,[h("i",{class:b(["el-icon-arrow-left",{disabled:M(d)}]),onClick:a[0]||(a[0]=e=>v(-1))},null,2),h("span",null,$(M(u)),1),h("i",{class:"el-icon-arrow-right",onClick:a[1]||(a[1]=e=>v(1))})])],2)],2),h("div",{class:b(`${o}-th`)},[(m(!0),g(w,null,O(e.dayTexts,(e=>(m(),g("div",{key:e},$(e),1)))),128))],2),h("div",{class:b(`${o}-body`)},[(m(!0),g(w,null,O(M(c).length/7,(e=>(m(),g("div",{class:b(`${o}-row`),key:e},[(m(),g(w,null,O(7,(a=>h("div",{class:b(`${o}-td ${k(j(e,a))}`),key:`${e}-${a}`},[h("span",{class:b(`${o}-day`)},$(0===j(e,a).currentMonth?j(e,a).days.toString().padStart(2,0):""),3),S(t.$slots,"default",{item:j(e,a)},void 0,!0)],2))),64))],2)))),128))],2)],2))},__scopeId:"data-v-31b0b88a"};j("data-v-6d39f4eb");const q={key:0,class:"slot-number"};k();const E={setup(e){const t=f([{date:"2021-09-02",value:3e3}]),a=e=>{const a=t.value.find((t=>t.date===e));return A(a.value).format("0.[0]a")},r=e=>{console.log(e)};return(e,s)=>(m(),g("div",null,[L(J,{dataList:t.value,onChangeMonth:r,title:"这是一个日历",start:"2021-05",ref:(e,t)=>{t.calendarRef=e}},{default:x((e=>{return[(r=e.item.date,t.value.some((e=>e.date===r))?(m(),g("div",q,$(a(e.item.date)),1)):P("",!0))];var r})),_:1},8,["dataList"])]))},__scopeId:"data-v-6d39f4eb"};T(E).use(F).mount("#app");
